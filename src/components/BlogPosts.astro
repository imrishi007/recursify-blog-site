---
// Import blog posts data from centralized source
import { blogPosts, getDifficultyClass } from '../data/blogPosts.js';
---

<section class="blog-posts" id="posts">
  <div class="posts-container">
    <div class="posts-header animate-on-scroll">
      <h2 class="posts-title">
        <span class="gradient-text">LeetCode Solutions</span>
      </h2>
      <p class="posts-subtitle">
        Step-by-step solutions with detailed explanations and optimized approaches
      </p>
    </div>

    <div class="posts-grid">
      {blogPosts.map((post, index) => (
        <article class="post-card glass animate-on-scroll" style={`animation-delay: ${index * 0.1}s`}>
          <div class="post-header">
            <div class="post-number">{post.number}</div>
            <div class="post-meta">
              <span class={`difficulty-badge ${getDifficultyClass(post.difficulty)}`}>
                {post.difficulty}
              </span>
              <div class="leetcode-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M13.483 0a1.374 1.374 0 0 0-.961.438L7.116 6.226l-3.854 4.126a5.266 5.266 0 0 0-1.209 2.104 5.35 5.35 0 0 0-.125.513 5.527 5.527 0 0 0 .062 2.362 5.83 5.83 0 0 0 .349 1.017 5.938 5.938 0 0 0 1.271 1.818c.51.515 1.043.944 1.654 1.207a5.021 5.021 0 0 0 2.004.388 5.086 5.086 0 0 0 2.013-.403 5.484 5.484 0 0 0 1.702-1.211L11.7 16.4l7.312-7.312c.196-.196.4-.4.62-.606.203-.21.35-.467.349-.738.015-.282-.074-.558-.238-.792a1.348 1.348 0 0 0-.307-.418c-.37-.365-.936-.609-1.512-.609-.576 0-1.141.244-1.512.609L12.6 10.345 8.344 6.088a.915.915 0 0 1-.013-1.292.914.914 0 0 1 1.292-.013l4.012 4.013a.914.914 0 0 1 .013 1.292.915.915 0 0 1-1.292.013L8.344 6.088Z" fill="#FFA116"/>
                </svg>
              </div>
            </div>
          </div>

          <div class="post-content">
            <h3 class="post-title">
              <a href={post.url}>{post.number} â€“ {post.title}</a>
            </h3>

            <p class="post-excerpt">{post.excerpt}</p>

            <div class="post-tags">
              {post.tags.map(tag => (
                <span class="tag">{tag}</span>
              ))}
            </div>
          </div>

          <div class="post-footer">
            <span class="read-time">{post.readTime} min read</span>
            <a href={post.url} class="read-more">
              Read Solution
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M5 12h14"/>
                <path d="M12 5l7 7-7 7"/>
              </svg>
            </a>
          </div>
        </article>
      ))}
    </div>

    <div class="posts-footer animate-on-scroll">
      <div class="social-links">
        <a href="https://github.com/imrishi007" class="btn btn-glass" target="_blank" rel="noopener" title="GitHub">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2C6.48 2 2 6.48 2 12c0 4.42 2.87 8.17 6.84 9.5.5.09.66-.22.66-.48 0-.24-.01-.87-.01-1.7-2.78.6-3.37-1.34-3.37-1.34-.45-1.15-1.1-1.46-1.1-1.46-.9-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.89 1.52 2.34 1.08 2.91.83.09-.65.35-1.08.63-1.33-2.22-.25-4.56-1.11-4.56-4.95 0-1.09.39-1.98 1.03-2.68-.1-.25-.45-1.27.1-2.65 0 0 .84-.27 2.75 1.02A9.56 9.56 0 0 1 12 6.8c.85.004 1.71.115 2.51.337 1.91-1.29 2.75-1.02 2.75-1.02.55 1.38.2 2.4.1 2.65.64.7 1.03 1.59 1.03 2.68 0 3.85-2.34 4.7-4.57 4.95.36.31.68.92.68 1.85 0 1.33-.01 2.4-.01 2.73 0 .27.16.58.67.48A10.01 10.01 0 0 0 22 12c0-5.52-4.48-10-10-10z"/></svg>
          GitHub
        </a>
        <a href="https://leetcode.com/u/rishipraval/" class="btn btn-glass" target="_blank" rel="noopener" title="LeetCode">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.483 0a1.374 1.374 0 0 0-.961.438L7.116 6.226l-3.854 4.126a5.266 5.266 0 0 0-1.209 2.104 5.35 5.35 0 0 0-.125.513 5.527 5.527 0 0 0 .062 2.362 5.83 5.83 0 0 0 .349 1.017 5.938 5.938 0 0 0 1.271 1.818c.51.515 1.043.944 1.654 1.207a5.021 5.021 0 0 0 2.004.388 5.086 5.086 0 0 0 2.013-.403 5.484 5.484 0 0 0 1.702-1.211L11.7 16.4l7.312-7.312c.196-.196.4-.4.62-.606.203-.21.35-.467.349-.738.015-.282-.074-.558-.238-.792a1.348 1.348 0 0 0-.307-.418c-.37-.365-.936-.609-1.512-.609-.576 0-1.141.244-1.512.609L12.6 10.345 8.344 6.088a.915.915 0 0 1-.013-1.292.914.914 0 0 1 1.292-.013l4.012 4.013a.914.914 0 0 1 .013 1.292.915.915 0 0 1-1.292.013L8.344 6.088Z" fill="#FFA116"/></svg>
          LeetCode
        </a>
        <a href="https://www.linkedin.com/in/rishipraval07/" class="btn btn-glass" target="_blank" rel="noopener" title="LinkedIn">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M19 0h-14c-2.76 0-5 2.24-5 5v14c0 2.76 2.24 5 5 5h14c2.76 0 5-2.24 5-5v-14c0-2.76-2.24-5-5-5zm-11 19h-3v-9h3v9zm-1.5-10.28c-.97 0-1.75-.79-1.75-1.75s.78-1.75 1.75-1.75 1.75.79 1.75 1.75-.78 1.75-1.75 1.75zm15.5 10.28h-3v-4.5c0-1.08-.02-2.47-1.5-2.47-1.5 0-1.73 1.17-1.73 2.39v4.58h-3v-9h2.89v1.23h.04c.4-.75 1.38-1.54 2.84-1.54 3.04 0 3.6 2 3.6 4.59v4.72z"/></svg>
          LinkedIn
        </a>
      </div>
    </div>
  </div>
</section>

<style>
  /* Universal box-sizing for easier layout */
  :root {
      box-sizing: border-box;
  }
  *, *::before, *::after {
      box-sizing: inherit;
  }

  /* Prevent horizontal overflow on the body if padding/margin is the issue */
  body {
      overflow-x: hidden;
  }

  .blog-posts {
    padding: 6rem 0;
    position: relative;
  }

  .posts-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
  }

  .posts-header {
    text-align: center;
    margin-bottom: 4rem;
  }

  .posts-title {
    font-size: 3rem;
    font-weight: 700;
    margin-bottom: 1rem;
  }

  .gradient-text {
    background: linear-gradient(135deg, #3b82f6 0%, #14b8a6 50%, #8b45ff 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .posts-subtitle {
    font-size: 1.25rem;
    color: #9ca3af;
    max-width: 600px;
    margin: 0 auto;
  }

  .posts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2rem;
    margin-bottom: 4rem;
  }

  .post-card {
    padding: 2rem;
    transition: all 0.3s ease;
    border-radius: 20px;
    position: relative;
    overflow: hidden;
    display: flex; /* Ensure consistent height for cards */
    flex-direction: column;
    justify-content: space-between;
  }

  .post-card:hover {
    transform: translateY(-8px);
    background: rgba(255, 255, 255, 0.12);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
  }

  .post-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, #3b82f6, #14b8a6, #8b45ff);
    border-radius: 20px 20px 0 0;
  }

  .post-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 1.5rem;
  }

  .post-number {
    font-size: 2rem;
    font-weight: 700;
    color: #14b8a6;
    font-family: 'JetBrains Mono', monospace;
  }

  .post-meta {
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  .difficulty-badge {
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
    font-size: 0.875rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .difficulty-easy {
    background: rgba(34, 197, 94, 0.2);
    color: #22c55e;
    border: 1px solid rgba(34, 197, 94, 0.3);
  }

  .difficulty-medium {
    background: rgba(251, 191, 36, 0.2);
    color: #fbbf24;
    border: 1px solid rgba(251, 191, 36, 0.3);
  }

  .difficulty-hard {
    background: rgba(239, 68, 68, 0.2);
    color: #ef4444;
    border: 1px solid rgba(239, 68, 68, 0.3);
  }

  .leetcode-icon {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .post-content {
    margin-bottom: 2rem; /* Restore margin-bottom */
  }

  .post-title {
    margin-bottom: 1rem;
  }

  .post-title a {
    color: #eeeeee;
    text-decoration: none;
    font-size: 1.5rem;
    font-weight: 600;
    transition: color 0.3s ease;
  }

  .post-title a:hover {
    color: #14b8a6;
  }

  .post-excerpt {
    color: #d1d5db;
    line-height: 1.6;
    margin-bottom: 1.5rem;
  }

  .post-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .tag {
    background: rgba(59, 130, 246, 0.1);
    color: #3b82f6;
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-size: 0.875rem;
    border: 1px solid rgba(59, 130, 246, 0.2);
  }

  /* Re-added .post-footer styles for individual cards */
  .post-footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding-top: 1.5rem;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    margin-top: auto; /* Push to bottom if content varies */
  }

  /* Re-added .read-time styles */
  .read-time {
    color: #9ca3af;
    font-size: 0.875rem;
  }

  /* Re-added .read-more styles */
  .read-more {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: #14b8a6;
    text-decoration: none;
    font-weight: 500;
    transition: all 0.3s ease;
  }

  /* Re-added .read-more:hover styles */
  .read-more:hover {
    color: #5eead4;
    transform: translateX(4px);
  }

  .posts-footer {
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2rem;
  }

  /* Removed .more-coming styles (if they were still there) */

  .social-links {
    display: flex;
    justify-content: center;
    gap: 1rem;
    flex-wrap: wrap;
  }

  .btn-glass {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 12px;
    padding: 0.75rem 1.5rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    color: #fff;
    font-weight: 500;
    font-size: 0.9rem;
    transition: all 0.3s ease;
    text-decoration: none;
    flex-shrink: 0;
  }

  .btn-glass:hover {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
    transform: translateY(-3px);
  }

  /* Removed .random-problem-btn styles (as the button is moved) */

  /* Responsive design */
  @media (max-width: 768px) {
    .posts-grid {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }

    .posts-title {
      font-size: 2.5rem;
    }

    .posts-subtitle {
      font-size: 1.1rem;
    }

    .post-card {
      padding: 1.5rem;
    }

    .post-header {
      flex-direction: column;
      align-items: center;
      text-align: center;
      gap: 0.5rem;
    }

    .post-number {
      margin-bottom: 0.5rem;
    }

    .post-meta {
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
      align-self: center;
    }

    .social-links {
      justify-content: center;
      gap: 0.75rem;
    }

    .btn-glass {
      padding: 0.6rem 1rem;
      font-size: 0.8rem;
    }
  }

  @media (max-width: 480px) {
    .posts-container {
      padding: 0 1rem;
    }

    .posts-grid {
      grid-template-columns: 1fr;
    }

    .post-card {
      padding: 1rem;
    }

    .post-title a {
      font-size: 1.3rem;
    }
  }
</style>

<script>
  // This script block should now only contain the animate-on-scroll logic
  // The random problem logic is moved to the Hero section's script.

  // Optional: Add intersection observer for animate-on-scroll if not already globally handled
  const animateOnScrollElements = document.querySelectorAll('.animate-on-scroll');
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('is-visible');
        observer.unobserve(entry.target);
      }
    });
  }, {
    threshold: 0.1, // Trigger when 10% of the element is visible
    rootMargin: '0px 0px -50px 0px' // Start animation a bit before it enters viewport bottom
  });

  animateOnScrollElements.forEach(element => {
    observer.observe(element);
  });
</script>